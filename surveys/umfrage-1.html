<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Die Mehrheit denkt anders als erwartet. | MarketShield</title>

<meta name="description" content="Kurze Umfrage zu Zusatzstoffen in Lebensmitteln. Deine Meinung z√§hlt.">

<style>
  body {
    font-family: system-ui, Arial, sans-serif;
    background: #fafafa;
    color: #222;
    margin: 0;
    padding: 20px;
  }
  .box {
    max-width: 720px;
    margin: auto;
    background: #fff;
    padding: 24px;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
  }
  button {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    font-size: 16px;
    cursor: pointer;
  }
  hr {
    margin: 24px 0;
  }
</style>
</head>

<body>

<div class="box">
  <h1>Sollten problematische Zusatzstoffe klarer gekennzeichnet werden?</h1>

  <!-- VOTE BUTTONS -->
  <div id="options">
    <button onclick="vote('Ja, unbedingt')">Ja, unbedingt</button>
    <button onclick="vote('Teilweise, je nach Risiko')">Teilweise, je nach Risiko</button>
    <button onclick="vote('Ich bin unsicher')">Ich bin unsicher</button>
    <button onclick="vote('Nein, aktuelle Kennzeichnung reicht')">Nein, aktuelle Kennzeichnung reicht</button>
  </div>

  <!-- RESULT + SHARE (ERST NACH VOTE) -->
  <div id="result"></div>
</div>

<script>
const MARKETSHIELD_LINK = "https://ligone-token.github.io/marketshield/";

function vote(answer) {
  document.getElementById("options").style.display = "none";

  document.getElementById("result").innerHTML = `
    <p><strong>Danke f√ºr deine Stimme:</strong> ${answer}</p>

    <hr>

    <button onclick="shareWhatsApp()">üü¢ WhatsApp</button>
    <button onclick="shareTelegram()">üîµ Telegram</button>
    <button onclick="shareX()">‚ùå X</button>
    <button onclick="shareFacebook()">üîµ Facebook</button>
    <button onclick="copySurvey()">üìã Link & Text kopieren</button>
    <button onclick="goMarketShield()">Zu MarketShield</button>
  `;
}

/* -------- NAVIGATION -------- */
function goMarketShield() {
  window.location.href = MARKETSHIELD_LINK;
}

/* -------- SHARE TEXT -------- */
function getShareText() {
  return `Ich habe gerade bei einer Umfrage zu Zusatzstoffen abgestimmt.
Wie siehst du das?

${window.location.href}`;
}

/* -------- SHARE BUTTONS -------- */
function shareWhatsApp() {
  window.open(
    "https://wa.me/?text=" + encodeURIComponent(getShareText()),
    "_blank"
  );
}

function shareTelegram() {
  window.open(
    "https://t.me/share/url?url=" + encodeURIComponent(window.location.href) +
    "&text=" + encodeURIComponent("Ich habe bei einer Umfrage abgestimmt. Wie siehst du das?"),
    "_blank"
  );
}

function shareX() {
  window.open(
    "https://x.com/intent/post?text=" + encodeURIComponent(getShareText()),
    "_blank"
  );
}

function shareFacebook() {
  window.open(
    "https://www.facebook.com/sharer/sharer.php?u=" +
    encodeURIComponent(window.location.href),
    "_blank"
  );
}

/* -------- COPY -------- */
function copySurvey() {
  const text = getShareText();

  if (navigator.clipboard && window.isSecureContext) {
    navigator.clipboard.writeText(text);
    alert("Text & Link kopiert ‚úîÔ∏è");
  } else {
    const t = document.createElement("textarea");
    t.value = text;
    document.body.appendChild(t);
    t.select();
    document.execCommand("copy");
    document.body.removeChild(t);
    alert("Text & Link kopiert ‚úîÔ∏è");
  }
}
</script>

</body>
</html>
